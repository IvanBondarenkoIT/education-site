# Команды импорта данных

Этот документ описывает команды для автоматического импорта данных из HTML файлов в папке `source`.

## Доступные команды

### 1. Импорт всех данных
```bash
python manage.py import_all_data [--clear] [--skip-*]
```

**Параметры:**
- `--clear` - очистить существующие данные перед импортом
- `--skip-business-values` - пропустить импорт бизнес-ценностей
- `--skip-training` - пропустить импорт программы обучения
- `--skip-instructions` - пропустить импорт должностных инструкций
- `--skip-coffee` - пропустить импорт информации о кофе

**Примеры:**
```bash
# Импорт всех данных с очисткой
python manage.py import_all_data --clear

# Импорт без очистки существующих данных
python manage.py import_all_data

# Импорт только бизнес-ценностей и программы обучения
python manage.py import_all_data --skip-instructions --skip-coffee
```

### 2. Импорт бизнес-ценностей
```bash
python manage.py import_business_values [--file PATH] [--clear]
```

**Параметры:**
- `--file PATH` - путь к HTML файлу (по умолчанию: `source/Добро пожаловать в команду Дом Кофе_files/saved_resource.html`)
- `--clear` - очистить существующие данные

**Примеры:**
```bash
# Импорт с очисткой
python manage.py import_business_values --clear

# Импорт из другого файла
python manage.py import_business_values --file path/to/file.html --clear
```

### 3. Импорт программы обучения
```bash
python manage.py import_training_program [--clear]
```

**Параметры:**
- `--clear` - очистить существующие данные

**Импортируемые файлы:**
- `source/1 день.html` → День 1
- `source/2 день.html` → День 2
- `source/3 день.html` → День 3
- `source/Итоги 1 недели.html` → Неделя 1
- `source/Итоги 2 недели.html` → Неделя 2
- `source/Итоги 3 недели.html` → Неделя 3
- `source/Итоги 1 месяца.html` → Месяц 1
- `source/Итоги 2 месяца.html` → Месяц 2
- `source/Итоги 3 месяца.html` → Месяц 3

### 4. Импорт должностных инструкций
```bash
python manage.py import_job_instructions [--clear]
```

**Параметры:**
- `--clear` - очистить существующие данные

**Импортируемые файлы:**
- Должностная инструкция менеджера магазина
- Должностная инструкция старшего менеджера магазина
- Должностная инструкция менеджера HoReCa
- Должностная инструкция менеджера онлайн
- Должностная инструкция менеджера сервисного центра
- Должностная инструкция Менеджер консультант (Грузия)
- Должностная инструкция офис менеджер (Грузия)
- Должностная инструкция БАТУМИ
- Должностная инструкция Саломе (с поправками)

### 5. Импорт информации о кофе
```bash
python manage.py import_coffee_info [--clear]
```

**Параметры:**
- `--clear` - очистить существующие данные

**Импортируемые файлы:**
- Информация о зерне
- Маркировка кофе
- Мировая классика
- Экстракция кофе
- Кофе без кофеина

## Статистика импорта

После выполнения команды `import_all_data` выводится статистика:

```
Статистика:
• Бизнес-ценности: 33
• Программы обучения: 8
• Должностные инструкции: 9
• Информация о кофе: 5
```

## Структура данных

### Бизнес-ценности
- **Ситуация** - описание ситуации
- **Бизнес ценность** - объяснение ценности
- **Категория** - автоматически определяется по тексту:
  - `competence` - компетентность
  - `leadership` - лидерство
  - `uniqueness` - уникальность
  - `team` - команда
  - `espresso_culture` - эспрессо культура

### Программа обучения
- **Заголовок** - из названия файла
- **Содержание** - извлеченный HTML контент
- **Тип периода** - день/неделя/месяц
- **Номер периода** - 1, 2, 3

### Должностные инструкции
- **Заголовок** - название инструкции
- **Должность** - manager, barista, etc.
- **Отдел** - management, barista, etc.
- **Содержание** - извлеченный HTML контент

### Информация о кофе
- **Заголовок** - название статьи
- **Категория** - beans, roasting, brewing, varieties, history, culture
- **Содержание** - извлеченный HTML контент

## Обработка ошибок

Команды обрабатывают следующие ошибки:
- Файл не найден
- HTML не содержит ожидаемую структуру
- Ошибки парсинга HTML
- Ошибки сохранения в базу данных

## Следующие шаги

После импорта данных:

1. **Проверьте админку** - http://127.0.0.1:8000/admin/
2. **Отредактируйте данные** - исправьте ошибки, добавьте недостающую информацию
3. **Добавьте переводы** - для многоязычности
4. **Создайте views и templates** - для отображения данных на сайте

## Зависимости

Для работы команд импорта требуется:
- `beautifulsoup4` - для парсинга HTML
- `django-modeltranslation` - для многоязычности
- `django-ckeditor` - для rich text полей
