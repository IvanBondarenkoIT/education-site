{% extends 'base.html' %}
{% load static %}

{% block title %}Должностные инструкции - {{ site_name }}{% endblock %}

{% block meta_description %}Должностные инструкции для всех должностей компании Дом Кофе. Подробные инструкции для всех специализаций.{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero hero--instructions">
    <div class="hero__background">
        <div class="hero__overlay"></div>
    </div>
    <div class="container">
        <div class="row align-items-center min-vh-50">
            <div class="col-lg-8">
                <div class="hero__content">
                    <h1 class="hero__title display-4 fw-bold text-white mb-4">
                        Должностные инструкции
                    </h1>
                    <p class="hero__subtitle lead text-white-75 mb-4">
                        Подробные инструкции для всех должностей и специализаций
                    </p>
                    <div class="hero__stats">
                        <span class="badge bg-success text-white fs-6 me-3">
                            <i class="fas fa-file-alt me-2"></i>
                            {{ total_count }} инструкций
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Instructions Section -->
<section class="instructions section">
    <div class="container">
        {% for department, instructions_list in departments.items %}
        <div class="instructions__department mb-5">
            <div class="row">
                <div class="col-12">
                    <h2 class="instructions__department-title h3 fw-bold mb-4">
                        <i class="fas fa-building text-success me-2"></i>
                        {{ instructions_list.0.get_department_display }}
                    </h2>
                </div>
            </div>
            
            <div class="row g-4">
                {% for instruction in instructions_list %}
                <div class="col-md-6 col-lg-4">
                    <div class="instruction-card">
                        <div class="instruction-card__header">
                            <div class="instruction-card__position">
                                <span class="badge bg-success">{{ instruction.get_position_display }}</span>
                            </div>
                            <div class="instruction-card__department">
                                <span class="badge bg-info">{{ instruction.get_department_display }}</span>
                            </div>
                        </div>
                        <div class="instruction-card__content">
                            <h3 class="instruction-card__title h6 fw-bold mb-3">
                                {{ instruction.title }}
                            </h3>
                            <div class="instruction-card__content-preview">
                                {{ instruction.content|safe|truncatewords:20 }}
                            </div>
                        </div>
                        <div class="instruction-card__footer">
                            <a href="{% url 'core:job_instruction_detail' instruction.id %}" class="btn btn-outline-success btn-sm">
                                Подробнее
                                <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Call to Action Section -->
<section class="cta section section--light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <div class="cta__content">
                    <h2 class="cta__title h3 fw-bold mb-4">
                        Готовы изучить свою должностную инструкцию?
                    </h2>
                    <p class="cta__description text-muted mb-4">
                        Выберите свою должность и изучите подробную инструкцию для успешной работы
                    </p>
                    <div class="cta__actions">
                        <a href="{% url 'core:training_program' %}" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-graduation-cap me-2"></i>
                            Программы обучения
                        </a>
                        <a href="{% url 'core:coffee_info' %}" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-mug-hot me-2"></i>
                            О кофе
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/layouts/instructions.css' %}">
{% endblock %}
